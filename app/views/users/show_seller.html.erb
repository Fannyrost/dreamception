<%= render 'shared/navbar' %>

<div class="container show-user w-75">

  <div class= "d-flex justify-content-between align-items-center mb-3">
    <div >
      <h2>Mon profil</h2>
    </div>
    <div><%= link_to 'Modifier mon profil', edit_user_path(@user.id), class: 'salmon-button' %></div>
  </div>


  <div class="box-profil d-flex justify-content-between">
    <div>
      <p>Nom : <%= @user.last_name %></p>
      <p>Prénom : <%= @user.first_name %></p>
    </div>
    <div>
      <p>Email : <%= @user.email %></p>
      <p>Téléphone : <%= @user.phone_number %></p>
      <span class="mt-2"><%= link_to 'Modifier mon mot de passe',  edit_user_password_path, class: 'salmon-button' %></span>
    </div>
  </div>



  <div class="mt-3"><h2> Mes expériences </h2></div>
  <div class="owned-exps d-flex justify-content-start my-4 ">
    <% @user.experiences.each do |experience| %>
      <div class="card-seller d-flex align-items-end" style= "background-image: url('<%= photo_for(experience) %>')" >
        <div class="card-content-seller d-flex justify-content-between align-items-end">
          <div>
            <%= link_to experience.title , experience_path(experience)   %>
            <div class="d-flex">
              <% if experience.average_rating != nil %>
                <% n = experience.average_rating.truncate() %>
                <% n.times do %>
                  <div><p><span  class="stars"><i class="fas fa-star"></i></span></p></div>
                <% end %>
                <% (5-n).times do %>
                  <div><p><span  class="stars"><i class="far fa-star"></i></span></p></div>
                <% end %>
              <% end %>
            </div>
          </div>
          <div class="d-flex flex-column align-items-end">
            <%= link_to 'Editer', edit_experience_path(experience), class: 'card-link-seller' %>
            <%= link_to 'Désactiver', '#' , class: 'card-link-seller'%>
          </div>
        </div>
      </div>
    <% end %>
    <div class="card-seller">
      <%= link_to new_experience_path do %>
        <div class="card-content-seller d-flex flex-column align-items-center justify-content-center" id="add-exp">
          <div><h2>+</h2></div>
          <div><h3>Ajouter une expérience</h3> </div>
        </div>
      <% end %>
    </div>
  </div>

<div id="historical-title" class=""><h2>Mon historique vendeur</h2></div>
<div class =" seller-historical justify-content-between" >
  <div class="d-flex justify-content-between">
    <div><a class="" href="#item1"> Expériences passées </a></div>
    <div><a class="button-futur-exp" href="#item2"> Expériences à venir</a></div>
  </div>
  <div class="d-flex justify-content-between">
    <div class="mt-3 past-exp-seller" id="item1">
      <% @user.experiences.each do |experience| %>

        <% experience.bookings.past_bookings.each do |booking| %>
          <div class="box-exp">
            <h3><%= booking.experience.title %></h3>
            <p><%= booking.experience.short_description %> <%= booking.experience.average_rating %></p>
            <p><%= booking.experience.average_rating %></p>
            <p><strong>Informations client </strong></p>
            <p>Nom et prénom : <%= booking.user.last_name %> <%= booking.user.first_name %></p>
            <p>Email : <%= booking.user.email %></p>
            <p>Téléphone : <%= booking.user.phone_number %></p>
            <div class="d-flex">
              <% if experience.average_rating != nil %>
                <% n = experience.average_rating.truncate() %>
                <% n.times do %>
                  <div><p><span  class="stars"><i class="fas fa-star"></i></span></p></div>
                <% end %>
                <% (5-n).times do %>
                  <div><p><span  class="stars"><i class="far fa-star"></i></span></p></div>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="mt-3 futur-exp-seller active id=item2">
      <% @user.experiences.each do |experience| %>
        <% experience.bookings.next_bookings.each do |booking| %>
          <div class="box-exp">
            <h3><%= booking.experience.title %></h3>
            <p><%= booking.experience.short_description %> <%= booking.experience.average_rating %></p>
            <p><%= booking.experience.average_rating %></p>
            <p><strong>Informations client </strong></p>
            <p>Nom et prénom : <%= booking.user.last_name %> <%= booking.user.first_name %></p>
            <p>Email : <%= booking.user.email %></p>
            <p>Téléphone : <%= booking.user.phone_number %></p>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<div id="historical-title" class=""><h2>Mon historique client</h2></div>
<div class =" seller-historical justify-content-between" >
  <div class="d-flex justify-content-between">
    <div><a class="active"> Expériences passées </a></div>
    <div><a class="button-futur-exp"> Expériences à venir</a></div>
  </div>
  <div class="d-flex justify-content-between">
    <div class="box-past-exp">
      <% @user.bookings.past_bookings.each do |booking| %>
        <div class="box-exp">
          <h3> <%= booking.experience.title %></h3>
          <p> <%= booking.experience.short_description %> </p>
          <div class="d-flex">
            <% if booking.experience.average_rating != nil %>
              <% n = booking.experience.average_rating.truncate() %>
              <% n.times do %>
                <div><p><span  class="stars"><i class="fas fa-star"></i></span></p></div>
              <% end %>
              <% (5-n).times do %>
                <div><p><span  class="stars"><i class="far fa-star"></i></span></p></div>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <div class="box-next-exp">
      <% @user.bookings.next_bookings.each do |booking| %>
        <div class="box-exp">
          <h3> <%= booking.experience.title %></h3>
          <p> <%= booking.experience.short_description %></p>
          <p> <%= booking.experience.average_rating %></p>
        </div>
      <% end %>
    </div>
  </div>
</div>

  <div class="user_future_experiences">
    <div class="box-next-exp"><h3>Expériences à venir</h3>
      <% @user.bookings.next_bookings.each do |booking| %>
        <div class="box-exp">
          <p> <%= booking.experience.title %></p>
          <p> <%= booking.experience.short_description %></p>
          <p> <%= booking.experience.average_rating %></p>
        </div>
      <% end %>
    </div>
  </div>
</div>

<div class="display-box-seller">
  <div class="seller_futur_experiences">
    <div class="mt-3"><h1> Historique Vendeur</h1></div>
      <% @user.experiences.each do |experience| %>
        <% experience.bookings.each do |booking| %>
          <div class="box-exp">
            <h1><%= booking.experience.title %></h1>
            <p><%= booking.experience.short_description %> <%= booking.experience.average_rating %></p>
            <p><%= booking.experience.average_rating %></p>
            <p>Informations client</p> <%= booking.user.first_name %>
            <p><%= booking.user.last_name %></p>
            <p><%= booking.user.phone_number %></p>
            <p><%= booking.user.email %></p>
          </div>
        <% end %>
      <% end %>
  </div>
</div>
</div>
</div>
